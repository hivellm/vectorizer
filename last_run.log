warning: unused import: `Bm25Embedding`
  --> src/api/handlers.rs:15:35
   |
15 |     embedding::{EmbeddingManager, Bm25Embedding},
   |                                   ^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `delete` and `post`
 --> src/api/server.rs:5:20
  |
5 |     routing::{get, post, delete},
  |                    ^^^^  ^^^^^^

warning: unused import: `tower::ServiceBuilder`
  --> src/api/server.rs:10:5
   |
10 | use tower::ServiceBuilder;
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Any`, `CorsLayer`, and `trace::TraceLayer`
  --> src/api/server.rs:12:12
   |
12 |     cors::{Any, CorsLayer},
   |            ^^^  ^^^^^^^^^
13 |     trace::TraceLayer,
   |     ^^^^^^^^^^^^^^^^^

warning: unused variable: `collection_info`
   --> src/api/handlers.rs:436:9
    |
436 |     let collection_info = match state.store.get_collection_metadata(&co...
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_collection_info`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: variable `matched_terms` is assigned to, but never used
   --> src/embedding/mod.rs:785:17
    |
785 |         let mut matched_terms = 0;
    |                 ^^^^^^^^^^^^^
    |
    = note: consider using `_matched_terms` instead

warning: `vectorizer` (lib) generated 6 warnings (run `cargo fix --lib -p vectorizer` to apply 4 suggestions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.27s
     Running `target/debug/vectorizer-server --host 127.0.0.1 --port 15001 --project ../gov`
[2m2025-09-24T10:51:43.088945Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Starting Vectorizer Server with dashboard
[2m2025-09-24T10:51:43.088985Z[0m [32m INFO[0m [2mvectorizer::db::vector_store[0m[2m:[0m Creating new VectorStore
[2m2025-09-24T10:51:43.089044Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Vector store initialized
[2m2025-09-24T10:51:43.089052Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Loading project from: ../gov
[2m2025-09-24T10:51:43.089115Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Loading project from: ../gov
[2m2025-09-24T10:51:43.091750Z[0m [33m WARN[0m [2mvectorizer::document_loader[0m[2m:[0m Failed to deserialize cache: Bincode does not support the serde::Deserializer::deserialize_any method, creating new cache
[2m2025-09-24T10:51:43.092000Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Configuration changed, invalidating cache
[2m2025-09-24T10:51:43.121915Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Found 422 documents to process
[2m2025-09-24T10:51:43.140747Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Cache stats: 0 hits, 422 misses
[2m2025-09-24T10:51:43.146121Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Saved cache to: ../gov/.vectorizer/cache.bin
[2m2025-09-24T10:51:43.146144Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Building vocabulary from 422 documents
[2m2025-09-24T10:51:43.146150Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Building vocabulary for embedding type: bm25
DEBUG: BM25 case in build_vocabulary
DEBUG: Collected 422 texts for vocabulary
DEBUG: Got BM25 provider
DEBUG: Cast to Bm25Embedding successful
DEBUG: Vocabulary size before: 0
Bm25Embedding vocabulary built:
  Total documents: 422
  Vocabulary size: 512
  Dimension: 512
  Sample vocabulary: [("process", 57), ("scope", 151), ("mais", 415), ("threat", 369), ("benchmarking", 339)]
DEBUG: Vocabulary size after: 512
[2m2025-09-24T10:51:43.499588Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m BM25 vocabulary built successfully
[2m2025-09-24T10:51:43.501101Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Saved BM25 tokenizer to: ../gov/.vectorizer/tokenizer.bm25.json
[2m2025-09-24T10:51:43.501573Z[0m [32m INFO[0m [2mvectorizer::db::vector_store[0m[2m:[0m Collection 'documents' created successfully
[2m2025-09-24T10:51:43.501597Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Set embedding type 'bm25' for collection 'documents'
[2m2025-09-24T10:51:43.501605Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Created collection: documents
[2m2025-09-24T10:51:43.501611Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Storing 1356 chunks in vector store
[2m2025-09-24T10:51:43.501617Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Starting to process 1356 chunks for embedding
[2m2025-09-24T10:51:43.501624Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1/1356
[2m2025-09-24T10:51:43.549153Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 101/1356
[2m2025-09-24T10:51:43.597384Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 201/1356
[2m2025-09-24T10:51:43.651031Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 301/1356
[2m2025-09-24T10:51:43.694361Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 401/1356
[2m2025-09-24T10:51:43.731057Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 501/1356
[2m2025-09-24T10:51:43.769809Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 601/1356
[2m2025-09-24T10:51:43.815428Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 701/1356
INFO: BM25 OOV hashing used for 'NT],
    "approval_rate": [APPROVAL_RATE],
    "average_score": [FINAL_AVERAGE_SCORE],
    "consensus_level": "[FINAL_CONSENSUS_LEVEL]",
    "strategic_alignment": "[STRATEGIC_ALIGNMENT_LEVEL]"
  }
}'; vocab size 512
INFO: BM25 OOV hashing used for 'oved_proposals": [APPROVED_COUNT],
    "rejected_proposals": [REJECTED_COUNT],
    "vetoed_proposals": [VETOED_COUNT],
    "approval_rate": [APPROVAL_RATE],
    "average_score": [AVERAGE_SCORE]
  }
}'; vocab size 512
[2m2025-09-24T10:51:43.860254Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 801/1356
[2m2025-09-24T10:51:43.902475Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 901/1356
[2m2025-09-24T10:51:43.948706Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1001/1356
INFO: BM25 OOV hashing used for 'ntegration (018)"],
    "tags": ["contextual-understanding", "semantic-processing", "context-synthesis", "multi-dimensional-integration", "decision-support", "ai-collaboration"]
  }
}'; vocab size 512
INFO: BM25 OOV hashing used for 'tegrationReferences": {
        "identitySystem": "024-038-036-007-052-security-integrity-suite",
        "benchmarkingSystem": "022-023-034-049-quality-testing-validation"
      }
    }
  }
}'; vocab size 512
[2m2025-09-24T10:51:43.983577Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1101/1356
[2m2025-09-24T10:51:44.023550Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1201/1356
[2m2025-09-24T10:51:44.063766Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1301/1356
[2m2025-09-24T10:51:44.089812Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully created 1356 vectors, inserting in batches
[2m2025-09-24T10:51:44.089837Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 1/28 (50 vectors)
[2m2025-09-24T10:51:44.090548Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 1
[2m2025-09-24T10:51:44.090555Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 2/28 (50 vectors)
[2m2025-09-24T10:51:44.091283Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 2
[2m2025-09-24T10:51:44.091293Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 3/28 (50 vectors)
[2m2025-09-24T10:51:44.091970Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 3
[2m2025-09-24T10:51:44.091975Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 4/28 (50 vectors)
[2m2025-09-24T10:51:44.092836Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 4
[2m2025-09-24T10:51:44.092850Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 5/28 (50 vectors)
[2m2025-09-24T10:51:44.093630Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 5
[2m2025-09-24T10:51:44.093638Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 6/28 (50 vectors)
[2m2025-09-24T10:51:44.094506Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 6
[2m2025-09-24T10:51:44.094518Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 7/28 (50 vectors)
[2m2025-09-24T10:51:44.095343Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 7
[2m2025-09-24T10:51:44.095356Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 8/28 (50 vectors)
[2m2025-09-24T10:51:44.096096Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 8
[2m2025-09-24T10:51:44.096107Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 9/28 (50 vectors)
[2m2025-09-24T10:51:44.096843Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 9
[2m2025-09-24T10:51:44.096854Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 10/28 (50 vectors)
[2m2025-09-24T10:51:44.097606Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 10
[2m2025-09-24T10:51:44.097618Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 11/28 (50 vectors)
[2m2025-09-24T10:51:44.098387Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 11
[2m2025-09-24T10:51:44.098398Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 12/28 (50 vectors)
[2m2025-09-24T10:51:44.099110Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 12
[2m2025-09-24T10:51:44.099116Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 13/28 (50 vectors)
[2m2025-09-24T10:51:44.099813Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 13
[2m2025-09-24T10:51:44.099818Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 14/28 (50 vectors)
[2m2025-09-24T10:51:44.100510Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 14
[2m2025-09-24T10:51:44.100520Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 15/28 (50 vectors)
[2m2025-09-24T10:51:44.101252Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 15
[2m2025-09-24T10:51:44.101263Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 16/28 (50 vectors)
[2m2025-09-24T10:51:44.102044Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 16
[2m2025-09-24T10:51:44.102050Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 17/28 (50 vectors)
[2m2025-09-24T10:51:44.102735Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 17
[2m2025-09-24T10:51:44.102740Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 18/28 (50 vectors)
[2m2025-09-24T10:51:44.103438Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 18
[2m2025-09-24T10:51:44.103444Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 19/28 (50 vectors)
[2m2025-09-24T10:51:44.104156Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 19
[2m2025-09-24T10:51:44.104168Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 20/28 (50 vectors)
[2m2025-09-24T10:51:52.527256Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 20
[2m2025-09-24T10:51:52.527292Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 21/28 (50 vectors)
[2m2025-09-24T10:51:52.527916Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 21
[2m2025-09-24T10:51:52.527923Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 22/28 (50 vectors)
[2m2025-09-24T10:51:52.528492Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 22
[2m2025-09-24T10:51:52.528499Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 23/28 (50 vectors)
[2m2025-09-24T10:51:52.529045Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 23
[2m2025-09-24T10:51:52.529051Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 24/28 (50 vectors)
[2m2025-09-24T10:51:52.529645Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 24
[2m2025-09-24T10:51:52.529651Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 25/28 (50 vectors)
[2m2025-09-24T10:51:52.530248Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 25
[2m2025-09-24T10:51:52.530263Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 26/28 (50 vectors)
[2m2025-09-24T10:51:52.530895Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 26
[2m2025-09-24T10:51:52.530908Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 27/28 (50 vectors)
[2m2025-09-24T10:51:52.531751Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 27
[2m2025-09-24T10:51:52.531765Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 28/28 (6 vectors)
[2m2025-09-24T10:51:52.531901Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 28
[2m2025-09-24T10:51:52.531923Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully stored 1356 chunks in collection 'documents'
[2m2025-09-24T10:51:52.534015Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully processed 422 documents into 1356 chunks
[2m2025-09-24T10:51:52.535716Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Successfully loaded 1356 document chunks
[2m2025-09-24T10:51:52.535786Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Collection stats: {
  "collection_name": "documents",
  "created_at": "2025-09-24T10:51:43.501530100+00:00",
  "dimension": 512,
  "metric": "Cosine",
  "updated_at": "2025-09-24T10:51:52.531897600+00:00",
  "vector_count": 1356
}
DEBUG: into_embedding_manager called
DEBUG: Checking for BM25 provider...
DEBUG: BM25 provider found!
SUCCESS: BM25 vocabulary has 512 terms before transfer
SUCCESS: Vocabulary preserved during move: 512 terms
Loading tokenizer from ../gov/.vectorizer/tokenizer.bm25.json
Tokenizer loaded, vocabulary size: 512
[2m2025-09-24T10:51:52.537866Z[0m [32m INFO[0m [2mvectorizer::api::server[0m[2m:[0m Starting Vectorizer HTTP server on 127.0.0.1:15001
[2m2025-09-24T10:51:52.538398Z[0m [32m INFO[0m [2mvectorizer::api::server[0m[2m:[0m Server listening on 127.0.0.1:15001
