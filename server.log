warning: unused import: `Bm25Embedding`
  --> src/api/handlers.rs:15:35
   |
15 |     embedding::{EmbeddingManager, Bm25Embedding},
   |                                   ^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `delete` and `post`
 --> src/api/server.rs:5:20
  |
5 |     routing::{get, post, delete},
  |                    ^^^^  ^^^^^^

warning: unused import: `tower::ServiceBuilder`
  --> src/api/server.rs:10:5
   |
10 | use tower::ServiceBuilder;
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Any`, `CorsLayer`, and `trace::TraceLayer`
  --> src/api/server.rs:12:12
   |
12 |     cors::{Any, CorsLayer},
   |            ^^^  ^^^^^^^^^
13 |     trace::TraceLayer,
   |     ^^^^^^^^^^^^^^^^^

warning: unused variable: `collection_info`
   --> src/api/handlers.rs:436:9
    |
436 |     let collection_info = match state.store.get_collection_metadata(&co...
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_collection_info`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: `vectorizer` (lib) generated 5 warnings (run `cargo fix --lib -p vectorizer` to apply 4 suggestions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.23s
     Running `target/debug/vectorizer-server --host 127.0.0.1 --port 15001 --project ../gov`
[2m2025-09-24T10:17:53.773814Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Starting Vectorizer Server with dashboard
[2m2025-09-24T10:17:53.773853Z[0m [32m INFO[0m [2mvectorizer::db::vector_store[0m[2m:[0m Creating new VectorStore
[2m2025-09-24T10:17:53.773912Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Vector store initialized
[2m2025-09-24T10:17:53.773921Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Loading project from: ../gov
[2m2025-09-24T10:17:53.773979Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Loading project from: ../gov
[2m2025-09-24T10:17:53.776638Z[0m [33m WARN[0m [2mvectorizer::document_loader[0m[2m:[0m Failed to deserialize cache: Bincode does not support the serde::Deserializer::deserialize_any method, creating new cache
[2m2025-09-24T10:17:53.776828Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Configuration changed, invalidating cache
[2m2025-09-24T10:17:53.804148Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Found 422 documents to process
[2m2025-09-24T10:17:53.822320Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Cache stats: 0 hits, 422 misses
[2m2025-09-24T10:17:53.827465Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Saved cache to: ../gov/.vectorizer_cache.bin
[2m2025-09-24T10:17:53.827496Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Building vocabulary from 422 documents
[2m2025-09-24T10:17:53.827502Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Building vocabulary for embedding type: bm25
Bm25Embedding vocabulary built:
  Total documents: 422
  Vocabulary size: 512
  Dimension: 512
  Sample vocabulary: [("protocol", 52), ("continuous", 299), ("need", 477), ("motivation", 287), ("await", 382)]
[2m2025-09-24T10:17:54.143464Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m BM25 vocabulary built successfully
[2m2025-09-24T10:17:54.144008Z[0m [32m INFO[0m [2mvectorizer::db::vector_store[0m[2m:[0m Collection 'documents' created successfully
[2m2025-09-24T10:17:54.144024Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Set embedding type 'bm25' for collection 'documents'
[2m2025-09-24T10:17:54.144030Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Created collection: documents
[2m2025-09-24T10:17:54.144035Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Storing 1356 chunks in vector store
[2m2025-09-24T10:17:54.144041Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Starting to process 1356 chunks for embedding
[2m2025-09-24T10:17:54.144049Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1/1356
[2m2025-09-24T10:17:54.186451Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 101/1356
[2m2025-09-24T10:17:54.230579Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 201/1356
[2m2025-09-24T10:17:54.278690Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 301/1356
[2m2025-09-24T10:17:54.319814Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 401/1356
[2m2025-09-24T10:17:54.353944Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 501/1356
[2m2025-09-24T10:17:54.386019Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 601/1356
[2m2025-09-24T10:17:54.420128Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 701/1356
WARNING: Bm25Embedding produced all-zero embedding for 'NT],
    "approval_rate": [APPROVAL_RATE],
    "average_score": [FINAL_AVERAGE_SCORE],
    "consensus_level": "[FINAL_CONSENSUS_LEVEL]",
    "strategic_alignment": "[STRATEGIC_ALIGNMENT_LEVEL]"
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("protocol", 52), ("continuous", 299), ("need", 477), ("motivation", 287), ("await", 382)]
Tokens from text: ["approval_rate", "approval_rate", "average_score", "final_average_score", "consensus_level", "final_consensus_level", "strategic_alignment", "strategic_alignment_level"]
Using fallback hash-based embedding
WARNING: Bm25Embedding produced all-zero embedding for 'oved_proposals": [APPROVED_COUNT],
    "rejected_proposals": [REJECTED_COUNT],
    "vetoed_proposals": [VETOED_COUNT],
    "approval_rate": [APPROVAL_RATE],
    "average_score": [AVERAGE_SCORE]
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("protocol", 52), ("continuous", 299), ("need", 477), ("motivation", 287), ("await", 382)]
Tokens from text: ["oved_proposals", "approved_count", "rejected_proposals", "rejected_count", "vetoed_proposals", "vetoed_count", "approval_rate", "approval_rate", "average_score", "average_score"]
Using fallback hash-based embedding
[2m2025-09-24T10:17:54.456129Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 801/1356
[2m2025-09-24T10:17:54.495553Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 901/1356
[2m2025-09-24T10:17:54.538786Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1001/1356
WARNING: Bm25Embedding produced all-zero embedding for 'ntegration (018)"],
    "tags": ["contextual-understanding", "semantic-processing", "context-synthesis", "multi-dimensional-integration", "decision-support", "ai-collaboration"]
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("protocol", 52), ("continuous", 299), ("need", 477), ("motivation", 287), ("await", 382)]
Tokens from text: ["ntegration", "018", "tags", "contextual-understanding", "semantic-processing", "context-synthesis", "multi-dimensional-integration", "decision-support", "ai-collaboration"]
Using fallback hash-based embedding
WARNING: Bm25Embedding produced all-zero embedding for 'tegrationReferences": {
        "identitySystem": "024-038-036-007-052-security-integrity-suite",
        "benchmarkingSystem": "022-023-034-049-quality-testing-validation"
      }
    }
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("protocol", 52), ("continuous", 299), ("need", 477), ("motivation", 287), ("await", 382)]
Tokens from text: ["tegrationreferences", "identitysystem", "024-038-036-007-052-security-integrity-suite", "benchmarkingsystem", "022-023-034-049-quality-testing-validation"]
Using fallback hash-based embedding
[2m2025-09-24T10:17:54.573481Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1101/1356
[2m2025-09-24T10:17:54.612667Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1201/1356
[2m2025-09-24T10:17:54.650785Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1301/1356
[2m2025-09-24T10:17:54.675875Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully created 1356 vectors, inserting in batches
[2m2025-09-24T10:17:54.675908Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 1/28 (50 vectors)
[2m2025-09-24T10:17:54.676667Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 1
[2m2025-09-24T10:17:54.676677Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 2/28 (50 vectors)
[2m2025-09-24T10:17:54.677384Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 2
[2m2025-09-24T10:17:54.677392Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 3/28 (50 vectors)
[2m2025-09-24T10:17:54.678100Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 3
[2m2025-09-24T10:17:54.678107Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 4/28 (50 vectors)
[2m2025-09-24T10:17:54.678810Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 4
[2m2025-09-24T10:17:54.678817Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 5/28 (50 vectors)
[2m2025-09-24T10:17:54.679560Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 5
[2m2025-09-24T10:17:54.679568Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 6/28 (50 vectors)
[2m2025-09-24T10:17:54.680283Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 6
[2m2025-09-24T10:17:54.680290Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 7/28 (50 vectors)
[2m2025-09-24T10:17:54.680990Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 7
[2m2025-09-24T10:17:54.680996Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 8/28 (50 vectors)
[2m2025-09-24T10:17:54.681693Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 8
[2m2025-09-24T10:17:54.681699Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 9/28 (50 vectors)
[2m2025-09-24T10:17:54.682376Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 9
[2m2025-09-24T10:17:54.682382Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 10/28 (50 vectors)
[2m2025-09-24T10:17:54.683099Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 10
[2m2025-09-24T10:17:54.683105Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 11/28 (50 vectors)
[2m2025-09-24T10:17:54.683826Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 11
[2m2025-09-24T10:17:54.683835Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 12/28 (50 vectors)
[2m2025-09-24T10:17:54.684572Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 12
[2m2025-09-24T10:17:54.684578Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 13/28 (50 vectors)
[2m2025-09-24T10:17:54.685281Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 13
[2m2025-09-24T10:17:54.685287Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 14/28 (50 vectors)
[2m2025-09-24T10:17:54.686045Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 14
[2m2025-09-24T10:17:54.686051Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 15/28 (50 vectors)
[2m2025-09-24T10:17:54.686781Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 15
[2m2025-09-24T10:17:54.686787Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 16/28 (50 vectors)
[2m2025-09-24T10:17:54.687541Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 16
[2m2025-09-24T10:17:54.687548Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 17/28 (50 vectors)
[2m2025-09-24T10:17:54.688310Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 17
[2m2025-09-24T10:17:54.688316Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 18/28 (50 vectors)
[2m2025-09-24T10:17:54.689067Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 18
[2m2025-09-24T10:17:54.689073Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 19/28 (50 vectors)
[2m2025-09-24T10:17:54.689833Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 19
[2m2025-09-24T10:17:54.689839Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 20/28 (50 vectors)
[2m2025-09-24T10:18:02.747229Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 20
[2m2025-09-24T10:18:02.747268Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 21/28 (50 vectors)
[2m2025-09-24T10:18:02.747937Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 21
[2m2025-09-24T10:18:02.747947Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 22/28 (50 vectors)
[2m2025-09-24T10:18:02.748543Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 22
[2m2025-09-24T10:18:02.748549Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 23/28 (50 vectors)
[2m2025-09-24T10:18:02.749134Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 23
[2m2025-09-24T10:18:02.749139Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 24/28 (50 vectors)
[2m2025-09-24T10:18:02.749746Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 24
[2m2025-09-24T10:18:02.749753Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 25/28 (50 vectors)
[2m2025-09-24T10:18:02.750331Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 25
[2m2025-09-24T10:18:02.750336Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 26/28 (50 vectors)
[2m2025-09-24T10:18:02.750939Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 26
[2m2025-09-24T10:18:02.750945Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 27/28 (50 vectors)
[2m2025-09-24T10:18:02.751628Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 27
[2m2025-09-24T10:18:02.751636Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 28/28 (6 vectors)
[2m2025-09-24T10:18:02.751723Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 28
[2m2025-09-24T10:18:02.751736Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully stored 1356 chunks in collection 'documents'
[2m2025-09-24T10:18:02.753588Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully processed 422 documents into 1356 chunks
[2m2025-09-24T10:18:02.755246Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Successfully loaded 1356 document chunks
[2m2025-09-24T10:18:02.755315Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Collection stats: {
  "collection_name": "documents",
  "created_at": "2025-09-24T10:17:54.143978500+00:00",
  "dimension": 512,
  "metric": "Cosine",
  "updated_at": "2025-09-24T10:18:02.751722700+00:00",
  "vector_count": 1356
}
DEBUG: into_embedding_manager called
DEBUG: Checking for BM25 provider...
DEBUG: BM25 provider found!
ERROR: BM25 vocabulary is empty! This indicates a problem in build_vocabulary()
WARNING: BM25 vocabulary is empty after transfer. This is expected - vocabulary is built during document loading.
[2m2025-09-24T10:18:02.755504Z[0m [32m INFO[0m [2mvectorizer::api::server[0m[2m:[0m Starting Vectorizer HTTP server on 127.0.0.1:15001
[2m2025-09-24T10:18:02.756083Z[0m [32m INFO[0m [2mvectorizer::api::server[0m[2m:[0m Server listening on 127.0.0.1:15001
