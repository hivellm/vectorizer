warning: unused import: `Bm25Embedding`
  --> src/api/handlers.rs:15:35
   |
15 |     embedding::{EmbeddingManager, Bm25Embedding},
   |                                   ^^^^^^^^^^^^^
   |
   = note: `#[warn(unused_imports)]` (part of `#[warn(unused)]`) on by default

warning: unused imports: `delete` and `post`
 --> src/api/server.rs:5:20
  |
5 |     routing::{get, post, delete},
  |                    ^^^^  ^^^^^^

warning: unused import: `tower::ServiceBuilder`
  --> src/api/server.rs:10:5
   |
10 | use tower::ServiceBuilder;
   |     ^^^^^^^^^^^^^^^^^^^^^

warning: unused imports: `Any`, `CorsLayer`, and `trace::TraceLayer`
  --> src/api/server.rs:12:12
   |
12 |     cors::{Any, CorsLayer},
   |            ^^^  ^^^^^^^^^
13 |     trace::TraceLayer,
   |     ^^^^^^^^^^^^^^^^^

warning: unused variable: `collection_info`
   --> src/api/handlers.rs:436:9
    |
436 |     let collection_info = match state.store.get_collection_metadata(&co...
    |         ^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_collection_info`
    |
    = note: `#[warn(unused_variables)]` (part of `#[warn(unused)]`) on by default

warning: `vectorizer` (lib) generated 5 warnings (run `cargo fix --lib -p vectorizer` to apply 4 suggestions)
    Finished `dev` profile [unoptimized + debuginfo] target(s) in 0.22s
     Running `target/debug/vectorizer-server --host 127.0.0.1 --port 15001 --project ../gov`
[2m2025-09-24T10:42:16.029126Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Starting Vectorizer Server with dashboard
[2m2025-09-24T10:42:16.029165Z[0m [32m INFO[0m [2mvectorizer::db::vector_store[0m[2m:[0m Creating new VectorStore
[2m2025-09-24T10:42:16.029215Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Vector store initialized
[2m2025-09-24T10:42:16.029222Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Loading project from: ../gov
[2m2025-09-24T10:42:16.029279Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Loading project from: ../gov
[2m2025-09-24T10:42:16.031902Z[0m [33m WARN[0m [2mvectorizer::document_loader[0m[2m:[0m Failed to deserialize cache: Bincode does not support the serde::Deserializer::deserialize_any method, creating new cache
[2m2025-09-24T10:42:16.032100Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Configuration changed, invalidating cache
[2m2025-09-24T10:42:16.058831Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Found 422 documents to process
[2m2025-09-24T10:42:16.076267Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Cache stats: 0 hits, 422 misses
[2m2025-09-24T10:42:16.081476Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Saved cache to: ../gov/.vectorizer/cache.bin
[2m2025-09-24T10:42:16.081508Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Building vocabulary from 422 documents
[2m2025-09-24T10:42:16.081515Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Building vocabulary for embedding type: bm25
DEBUG: BM25 case in build_vocabulary
DEBUG: Collected 422 texts for vocabulary
DEBUG: Got BM25 provider
DEBUG: Cast to Bm25Embedding successful
DEBUG: Vocabulary size before: 0
Bm25Embedding vocabulary built:
  Total documents: 422
  Vocabulary size: 512
  Dimension: 512
  Sample vocabulary: [("role", 206), ("rules", 354), ("when", 434), ("llm", 436), ("command", 426)]
DEBUG: Vocabulary size after: 512
[2m2025-09-24T10:42:16.407135Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m BM25 vocabulary built successfully
[2m2025-09-24T10:42:16.408456Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Saved BM25 tokenizer to: ../gov/.vectorizer/tokenizer.bm25.json
[2m2025-09-24T10:42:16.408843Z[0m [32m INFO[0m [2mvectorizer::db::vector_store[0m[2m:[0m Collection 'documents' created successfully
[2m2025-09-24T10:42:16.408860Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Set embedding type 'bm25' for collection 'documents'
[2m2025-09-24T10:42:16.408867Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Created collection: documents
[2m2025-09-24T10:42:16.408873Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Storing 1356 chunks in vector store
[2m2025-09-24T10:42:16.408878Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Starting to process 1356 chunks for embedding
[2m2025-09-24T10:42:16.408886Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1/1356
[2m2025-09-24T10:42:16.451369Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 101/1356
[2m2025-09-24T10:42:16.495929Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 201/1356
[2m2025-09-24T10:42:16.544650Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 301/1356
[2m2025-09-24T10:42:16.584966Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 401/1356
[2m2025-09-24T10:42:16.618960Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 501/1356
[2m2025-09-24T10:42:16.650803Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 601/1356
[2m2025-09-24T10:42:16.684546Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 701/1356
WARNING: Bm25Embedding produced all-zero embedding for 'NT],
    "approval_rate": [APPROVAL_RATE],
    "average_score": [FINAL_AVERAGE_SCORE],
    "consensus_level": "[FINAL_CONSENSUS_LEVEL]",
    "strategic_alignment": "[STRATEGIC_ALIGNMENT_LEVEL]"
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("role", 206), ("rules", 354), ("when", 434), ("llm", 436), ("command", 426)]
Tokens from text: ["nt", "approval_rate", "approval_rate", "average_score", "final_average_score", "consensus_level", "final_consensus_level", "strategic_alignment", "strategic_alignment_level"]
Using fallback hash-based embedding
WARNING: Bm25Embedding produced all-zero embedding for 'oved_proposals": [APPROVED_COUNT],
    "rejected_proposals": [REJECTED_COUNT],
    "vetoed_proposals": [VETOED_COUNT],
    "approval_rate": [APPROVAL_RATE],
    "average_score": [AVERAGE_SCORE]
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("role", 206), ("rules", 354), ("when", 434), ("llm", 436), ("command", 426)]
Tokens from text: ["oved_proposals", "approved_count", "rejected_proposals", "rejected_count", "vetoed_proposals", "vetoed_count", "approval_rate", "approval_rate", "average_score", "average_score"]
Using fallback hash-based embedding
[2m2025-09-24T10:42:16.719973Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 801/1356
[2m2025-09-24T10:42:16.759105Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 901/1356
[2m2025-09-24T10:42:16.804025Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1001/1356
WARNING: Bm25Embedding produced all-zero embedding for 'ntegration (018)"],
    "tags": ["contextual-understanding", "semantic-processing", "context-synthesis", "multi-dimensional-integration", "decision-support", "ai-collaboration"]
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("role", 206), ("rules", 354), ("when", 434), ("llm", 436), ("command", 426)]
Tokens from text: ["ntegration", "018", "tags", "contextual-understanding", "semantic-processing", "context-synthesis", "multi-dimensional-integration", "decision-support", "ai-collaboration"]
Using fallback hash-based embedding
WARNING: Bm25Embedding produced all-zero embedding for 'tegrationReferences": {
        "identitySystem": "024-038-036-007-052-security-integrity-suite",
        "benchmarkingSystem": "022-023-034-049-quality-testing-validation"
      }
    }
  }
}'
Vocabulary size: 512, Matched terms: 0
Sample vocabulary: [("role", 206), ("rules", 354), ("when", 434), ("llm", 436), ("command", 426)]
Tokens from text: ["tegrationreferences", "identitysystem", "024-038-036-007-052-security-integrity-suite", "benchmarkingsystem", "022-023-034-049-quality-testing-validation"]
Using fallback hash-based embedding
[2m2025-09-24T10:42:16.839095Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1101/1356
[2m2025-09-24T10:42:16.878583Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1201/1356
[2m2025-09-24T10:42:16.918439Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Processing chunk 1301/1356
[2m2025-09-24T10:42:16.943639Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully created 1356 vectors, inserting in batches
[2m2025-09-24T10:42:16.943663Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 1/28 (50 vectors)
[2m2025-09-24T10:42:16.944418Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 1
[2m2025-09-24T10:42:16.944428Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 2/28 (50 vectors)
[2m2025-09-24T10:42:16.945127Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 2
[2m2025-09-24T10:42:16.945134Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 3/28 (50 vectors)
[2m2025-09-24T10:42:16.945830Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 3
[2m2025-09-24T10:42:16.945837Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 4/28 (50 vectors)
[2m2025-09-24T10:42:16.946538Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 4
[2m2025-09-24T10:42:16.946544Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 5/28 (50 vectors)
[2m2025-09-24T10:42:16.947323Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 5
[2m2025-09-24T10:42:16.947331Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 6/28 (50 vectors)
[2m2025-09-24T10:42:16.948052Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 6
[2m2025-09-24T10:42:16.948059Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 7/28 (50 vectors)
[2m2025-09-24T10:42:16.948787Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 7
[2m2025-09-24T10:42:16.948794Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 8/28 (50 vectors)
[2m2025-09-24T10:42:16.949507Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 8
[2m2025-09-24T10:42:16.949514Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 9/28 (50 vectors)
[2m2025-09-24T10:42:16.950266Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 9
[2m2025-09-24T10:42:16.950273Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 10/28 (50 vectors)
[2m2025-09-24T10:42:16.951071Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 10
[2m2025-09-24T10:42:16.951077Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 11/28 (50 vectors)
[2m2025-09-24T10:42:16.951816Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 11
[2m2025-09-24T10:42:16.951822Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 12/28 (50 vectors)
[2m2025-09-24T10:42:16.952576Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 12
[2m2025-09-24T10:42:16.952583Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 13/28 (50 vectors)
[2m2025-09-24T10:42:16.953360Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 13
[2m2025-09-24T10:42:16.953366Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 14/28 (50 vectors)
[2m2025-09-24T10:42:16.954076Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 14
[2m2025-09-24T10:42:16.954082Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 15/28 (50 vectors)
[2m2025-09-24T10:42:16.954786Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 15
[2m2025-09-24T10:42:16.954792Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 16/28 (50 vectors)
[2m2025-09-24T10:42:16.955557Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 16
[2m2025-09-24T10:42:16.955563Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 17/28 (50 vectors)
[2m2025-09-24T10:42:16.956281Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 17
[2m2025-09-24T10:42:16.956287Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 18/28 (50 vectors)
[2m2025-09-24T10:42:16.956980Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 18
[2m2025-09-24T10:42:16.956986Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 19/28 (50 vectors)
[2m2025-09-24T10:42:16.957682Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 19
[2m2025-09-24T10:42:16.957688Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 20/28 (50 vectors)
[2m2025-09-24T10:42:24.747574Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 20
[2m2025-09-24T10:42:24.747612Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 21/28 (50 vectors)
[2m2025-09-24T10:42:24.748261Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 21
[2m2025-09-24T10:42:24.748271Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 22/28 (50 vectors)
[2m2025-09-24T10:42:24.748845Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 22
[2m2025-09-24T10:42:24.748852Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 23/28 (50 vectors)
[2m2025-09-24T10:42:24.749397Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 23
[2m2025-09-24T10:42:24.749402Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 24/28 (50 vectors)
[2m2025-09-24T10:42:24.749975Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 24
[2m2025-09-24T10:42:24.749981Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 25/28 (50 vectors)
[2m2025-09-24T10:42:24.750563Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 25
[2m2025-09-24T10:42:24.750570Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 26/28 (50 vectors)
[2m2025-09-24T10:42:24.751101Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 26
[2m2025-09-24T10:42:24.751107Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 27/28 (50 vectors)
[2m2025-09-24T10:42:24.751772Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 27
[2m2025-09-24T10:42:24.751778Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Inserting batch 28/28 (6 vectors)
[2m2025-09-24T10:42:24.751868Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully inserted batch 28
[2m2025-09-24T10:42:24.751882Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully stored 1356 chunks in collection 'documents'
[2m2025-09-24T10:42:24.753817Z[0m [32m INFO[0m [2mvectorizer::document_loader[0m[2m:[0m Successfully processed 422 documents into 1356 chunks
[2m2025-09-24T10:42:24.755642Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Successfully loaded 1356 document chunks
[2m2025-09-24T10:42:24.755732Z[0m [32m INFO[0m [2mvectorizer_server[0m[2m:[0m Collection stats: {
  "collection_name": "documents",
  "created_at": "2025-09-24T10:42:16.408814300+00:00",
  "dimension": 512,
  "metric": "Cosine",
  "updated_at": "2025-09-24T10:42:24.751867500+00:00",
  "vector_count": 1356
}
DEBUG: into_embedding_manager called
DEBUG: Checking for BM25 provider...
DEBUG: BM25 provider found!
SUCCESS: BM25 vocabulary has 512 terms before transfer
SUCCESS: Vocabulary preserved during move: 512 terms
Loading tokenizer from ../gov/.vectorizer/tokenizer.bm25.json
Tokenizer loaded, vocabulary size: 512
[2m2025-09-24T10:42:24.757806Z[0m [32m INFO[0m [2mvectorizer::api::server[0m[2m:[0m Starting Vectorizer HTTP server on 127.0.0.1:15001
[2m2025-09-24T10:42:24.758296Z[0m [32m INFO[0m [2mvectorizer::api::server[0m[2m:[0m Server listening on 127.0.0.1:15001
