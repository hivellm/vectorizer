# Embedding Dimension Comparison Benchmark

**Generated**: 2025-10-01 20:16:20 UTC

## Test Configuration

- **Dataset Size**: 5000 documents
- **Dimensions Tested**: 64, 128, 256, 384, 512, 768, 1024, 1536
- **Embedding Model**: BM25
- **HNSW Config**: M=16, ef_construction=200
- **Distance Metric**: Cosine

## Executive Summary

| Dimension | Memory (MB) | Bytes/Vec | Build Time (ms) | Search (μs) | QPS | MAP | Recall@10 |
|-----------|-------------|-----------|-----------------|-------------|-----|-----|----------|
| 64 | 1.26 | 264 | 993 | 383 | 2434 | 0.0040 | 0.0064 |
| 128 | 2.48 | 520 | 1421 | 365 | 2538 | 0.0094 | 0.0130 |
| 256 | 4.92 | 1032 | 2197 | 458 | 2010 | 0.0216 | 0.0245 |
| 384 | 7.36 | 1544 | 3016 | 560 | 1641 | 0.0277 | 0.0350 |
| 512 | 9.80 | 2056 | 3780 | 670 | 1373 | 0.0376 | 0.0449 |
| 768 | 14.69 | 3080 | 5278 | 826 | 1107 | 0.0498 | 0.0546 |
| 1024 | 19.57 | 4104 | 6904 | 980 | 926 | 0.0458 | 0.0519 |
| 1536 | 29.33 | 6152 | 10206 | 1377 | 660 | 0.0445 | 0.0491 |

## Detailed Analysis

### Quality vs Dimension

| Dimension | MAP | vs 512D | Recall@10 | vs 512D | Precision@10 |
|-----------|-----|---------|-----------|---------|-------------|
| 64 | 0.0040 | -89.5% | 0.0064 | -85.7% | 0.3857 |
| 128 | 0.0094 | -75.0% | 0.0130 | -71.1% | 0.4581 |
| 256 | 0.0216 | -42.7% | 0.0245 | -45.3% | 0.7110 |
| 384 | 0.0277 | -26.4% | 0.0350 | -22.0% | 0.8172 |
| 512 | 0.0376 | +0.0% | 0.0449 | +0.0% | 0.8874 |
| 768 | 0.0498 | +32.3% | 0.0546 | +21.8% | 0.9437 |
| 1024 | 0.0458 | +21.8% | 0.0519 | +15.7% | 0.9156 |
| 1536 | 0.0445 | +18.3% | 0.0491 | +9.4% | 0.9118 |

### Memory vs Dimension

| Dimension | Total Memory | Memory/Vector | vs 512D |
|-----------|--------------|---------------|----------|
| 64 | 1.26 MB | 264 bytes | 0.13x |
| 128 | 2.48 MB | 520 bytes | 0.25x |
| 256 | 4.92 MB | 1032 bytes | 0.50x |
| 384 | 7.36 MB | 1544 bytes | 0.75x |
| 512 | 9.80 MB | 2056 bytes | 1.00x |
| 768 | 14.69 MB | 3080 bytes | 1.50x |
| 1024 | 19.57 MB | 4104 bytes | 2.00x |
| 1536 | 29.33 MB | 6152 bytes | 2.99x |

### Performance vs Dimension

| Dimension | Search Latency | P95 | QPS | vs 512D |
|-----------|----------------|-----|-----|----------|
| 64 | 383 μs | 449 μs | 2434 | 0.57x |
| 128 | 365 μs | 415 μs | 2538 | 0.54x |
| 256 | 458 μs | 560 μs | 2010 | 0.68x |
| 384 | 560 μs | 679 μs | 1641 | 0.84x |
| 512 | 670 μs | 798 μs | 1373 | 1.00x |
| 768 | 826 μs | 1000 μs | 1107 | 1.23x |
| 1024 | 980 μs | 1197 μs | 926 | 1.46x |
| 1536 | 1377 μs | 1581 μs | 660 | 2.06x |

## Key Insights

### Best Quality: 768D
- MAP: 0.0498
- Recall@10: 0.0546
- Memory cost: 14.69 MB

### Fastest Search: 128D
- Latency: 365 μs
- QPS: 2538
- Quality (MAP): 0.0094

### Most Memory Efficient: 64D
- Memory: 1.26 MB
- Bytes/vector: 264
- Quality (MAP): 0.0040

### Quality vs Size Trade-offs

- **64D**: 8.0% quality retention, 0.0032 MAP/MB efficiency
- **128D**: 18.9% quality retention, 0.0038 MAP/MB efficiency
- **256D**: 43.3% quality retention, 0.0044 MAP/MB efficiency
- **384D**: 55.6% quality retention, 0.0038 MAP/MB efficiency
- **512D**: 75.6% quality retention, 0.0038 MAP/MB efficiency
- **768D**: 100.0% quality retention, 0.0034 MAP/MB efficiency
- **1024D**: 92.0% quality retention, 0.0023 MAP/MB efficiency
- **1536D**: 89.4% quality retention, 0.0015 MAP/MB efficiency

### Diminishing Returns Analysis

- **64D → 128D** (+64 dims): +136.92% quality, +97.1% memory
- **128D → 256D** (+128 dims): +129.53% quality, +98.5% memory
- **256D → 384D** (+128 dims): +28.47% quality, +49.6% memory
- **384D → 512D** (+128 dims): +35.81% quality, +33.2% memory
- **512D → 768D** (+256 dims): +32.34% quality, +49.8% memory
- **768D → 1024D** (+256 dims): -7.97% quality, +33.2% memory
- **1024D → 1536D** (+512 dims): -2.85% quality, +49.9% memory

## Recommendations

### Overall Best Balance

**Recommended: 768D** (score: 0.650)

Reasoning:
- Quality: 0.0498 MAP (100.0% of best)
- Speed: 826 μs (2.3x vs fastest)
- Memory: 14.69 MB (11.7x vs smallest)

### Use Cases

1. **Maximum Quality**: Use 768D when accuracy is critical
2. **Maximum Speed**: Use 128D when low latency is priority
3. **Memory Constrained**: Use 64D when storage is limited
4. **Production Balanced**: Use 768D for best overall balance

### Scaling Projections

Estimated requirements for 1M vectors:

- **64D**: 0.25 GB memory, ~199s build time
- **128D**: 0.48 GB memory, ~284s build time
- **256D**: 0.96 GB memory, ~439s build time
- **384D**: 1.44 GB memory, ~603s build time
- **512D**: 1.91 GB memory, ~756s build time
- **768D**: 2.87 GB memory, ~1056s build time
- **1024D**: 3.82 GB memory, ~1381s build time
- **1536D**: 5.73 GB memory, ~2041s build time

---

*Report generated by Vectorizer Dimension Comparison Benchmark*
