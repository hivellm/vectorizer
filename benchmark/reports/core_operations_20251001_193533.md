# Vectorizer Core Operations Performance Benchmark

**Generated**: 2025-10-01 19:35:33 UTC

## Test Configuration

- **Dataset Size**: 100000 vectors
- **Vector Dimension**: 512
- **HNSW Parameters**: M=16, ef_construction=200
- **Distance Metric**: Cosine

## Executive Summary

| Operation | Throughput (ops/s) | Avg Latency (μs) | P95 Latency (μs) | P99 Latency (μs) |
|-----------|-------------------|------------------|------------------|------------------|
| Insert Single | 4608.29 | 217 | 285 | 337 |
| Insert Batch | 4430.91 | 119710 | 266068 | 279845 |
| Search k=1 | 77.23 | 12948 | 16778 | 21055 |
| Search k=10 | 71.67 | 13952 | 20032 | 23587 |
| Search k=100 | 61.62 | 16229 | 23086 | 27769 |
| Update Single | inf | 0 | 1 | 1 |
| Update Batch | 2309.47 | 43347 | 432973 | 432973 |
| Delete Single | inf | 0 | 0 | 0 |
| Delete Batch | inf | 20 | 23 | 23 |
| Concurrent Mixed | 108.47 | 9218 | 17115 | 21256 |

## Detailed Results

### Insert Single

**Configuration**: Sequential, no batching

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 217.00 ms (0.22 s)
- **Throughput**: 4608.29 ops/sec
- **Throughput**: 276497.70 ops/min

#### Latency Distribution

- **Average**: 217 μs (0.22 ms)
- **P50 (Median)**: 220 μs
- **P95**: 285 μs
- **P99**: 337 μs
- **Min**: 5 μs
- **Max**: 395 μs

#### Memory Impact

- **Before**: 0.00 MB
- **After**: 1.96 MB
- **Delta**: 1.96 MB

---

### Insert Batch

**Configuration**: Batch sizes: [100, 500, 1000], parallel

#### Performance Metrics

- **Total Operations**: 16000
- **Total Time**: 3611.00 ms (3.61 s)
- **Throughput**: 4430.91 ops/sec
- **Throughput**: 265854.33 ops/min

#### Latency Distribution

- **Average**: 119710 μs (119.71 ms)
- **P50 (Median)**: 111476 μs
- **P95**: 266068 μs
- **P99**: 279845 μs
- **Min**: 6490 μs
- **Max**: 279845 μs

#### Memory Impact

- **Before**: 0.00 MB
- **After**: 0.00 MB
- **Delta**: 0.00 MB

---

### Search k=1

**Configuration**: 1000 queries on 100000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 12948.00 ms (12.95 s)
- **Throughput**: 77.23 ops/sec
- **Throughput**: 4633.92 ops/min

#### Latency Distribution

- **Average**: 12948 μs (12.95 ms)
- **P50 (Median)**: 12323 μs
- **P95**: 16778 μs
- **P99**: 21055 μs
- **Min**: 10494 μs
- **Max**: 27593 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 196.16 MB
- **Delta**: 0.00 MB

---

### Search k=10

**Configuration**: 1000 queries on 100000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 13953.00 ms (13.95 s)
- **Throughput**: 71.67 ops/sec
- **Throughput**: 4300.15 ops/min

#### Latency Distribution

- **Average**: 13952 μs (13.95 ms)
- **P50 (Median)**: 13052 μs
- **P95**: 20032 μs
- **P99**: 23587 μs
- **Min**: 10591 μs
- **Max**: 36095 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 196.16 MB
- **Delta**: 0.00 MB

---

### Search k=100

**Configuration**: 1000 queries on 100000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 16229.00 ms (16.23 s)
- **Throughput**: 61.62 ops/sec
- **Throughput**: 3697.09 ops/min

#### Latency Distribution

- **Average**: 16229 μs (16.23 ms)
- **P50 (Median)**: 15485 μs
- **P95**: 23086 μs
- **P99**: 27769 μs
- **Min**: 11142 μs
- **Max**: 32940 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 196.16 MB
- **Delta**: 0.00 MB

---

### Update Single

**Configuration**: Sequential updates

#### Performance Metrics

- **Total Operations**: 500
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 0 μs (0.00 ms)
- **P50 (Median)**: 0 μs
- **P95**: 1 μs
- **P99**: 1 μs
- **Min**: 0 μs
- **Max**: 3 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 195.18 MB
- **Delta**: 17592186044415.02 MB

---

### Update Batch

**Configuration**: Batch size: 100, parallel

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 433.00 ms (0.43 s)
- **Throughput**: 2309.47 ops/sec
- **Throughput**: 138568.13 ops/min

#### Latency Distribution

- **Average**: 43347 μs (43.35 ms)
- **P50 (Median)**: 59 μs
- **P95**: 432973 μs
- **P99**: 432973 μs
- **Min**: 43 μs
- **Max**: 432973 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 196.16 MB
- **Delta**: 0.00 MB

---

### Delete Single

**Configuration**: Sequential deletes

#### Performance Metrics

- **Total Operations**: 500
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 0 μs (0.00 ms)
- **P50 (Median)**: 0 μs
- **P95**: 0 μs
- **P99**: 0 μs
- **Min**: 0 μs
- **Max**: 1 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 195.18 MB
- **Delta**: 17592186044415.02 MB

---

### Delete Batch

**Configuration**: Batch size: 100

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 20 μs (0.02 ms)
- **P50 (Median)**: 20 μs
- **P95**: 23 μs
- **P99**: 23 μs
- **Min**: 18 μs
- **Max**: 23 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 194.20 MB
- **Delta**: 17592186044414.04 MB

---

### Concurrent Mixed

**Configuration**: 70% search, 20% insert, 10% delete

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 9219.00 ms (9.22 s)
- **Throughput**: 108.47 ops/sec
- **Throughput**: 6508.30 ops/min

#### Latency Distribution

- **Average**: 9218 μs (9.22 ms)
- **P50 (Median)**: 11560 μs
- **P95**: 17115 μs
- **P99**: 21256 μs
- **Min**: 0 μs
- **Max**: 25060 μs

#### Memory Impact

- **Before**: 196.16 MB
- **After**: 196.35 MB
- **Delta**: 0.19 MB

---

## Key Insights

### Insert Performance

- **Batch insert is 0.96x faster** than single insert
- Single insert: 4608.29 ops/sec (217 μs/op)
- Batch insert: 4430.91 ops/sec (119710 μs/batch)

### Search Performance

- **k=1**: 12948 μs avg, 77.23 QPS
- **k=10**: 13952 μs avg, 71.67 QPS
- **k=100**: 16229 μs avg, 61.62 QPS
- Search time scales with k: 1.25x slower (k=100 vs k=1)

### Update Performance

- **Batch update is 0.00x faster** than single update
- Single update: inf ops/sec
- Batch update: 2309.47 ops/sec

### Delete Performance

- **Batch delete is NaNx faster** than single delete
- Single delete: inf ops/sec
- Batch delete: inf ops/sec

### Concurrent Mixed Workload

- **Overall throughput**: 108.47 ops/sec
- **Average latency**: 9218 μs
- **P95 latency**: 17115 μs
- **P99 latency**: 21256 μs

## Recommendations

### For Maximum Throughput

1. **Use batch operations** whenever possible (2-10x faster)
2. **Optimize batch sizes**: 500-1000 vectors per batch
3. **Enable parallel processing** for batch operations

### For Low Latency

1. **Target P95**: Keep queries under 20032 μs for good UX
2. **Use smaller k values** when possible (k=10 is 2-3x faster than k=100)
3. **Warm up index** before serving production traffic

### For Memory Efficiency

1. **Expected memory**: ~0.00 MB per 10K vectors
2. **Use quantization** for collections > 100K vectors
3. **Consider lazy loading** for rarely accessed collections

## Performance Targets Met?

- ❌ Insert < 100μs/op (batch)
- ❌ Search < 5ms (k=10)
- ✅ Update < 200μs/op (batch)
- ✅ Delete < 50μs/op (batch)

---

*Report generated by Vectorizer Core Operations Benchmark*
