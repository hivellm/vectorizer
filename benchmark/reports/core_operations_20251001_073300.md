# Vectorizer Core Operations Performance Benchmark

**Generated**: 2025-10-01 07:33:00 UTC

## Test Configuration

- **Dataset Size**: 1000000 vectors
- **Vector Dimension**: 512
- **HNSW Parameters**: M=16, ef_construction=200
- **Distance Metric**: Cosine

## Executive Summary

| Operation | Throughput (ops/s) | Avg Latency (μs) | P95 Latency (μs) | P99 Latency (μs) |
|-----------|-------------------|------------------|------------------|------------------|
| Insert Single | 4545.45 | 219 | 295 | 317 |
| Insert Batch | 4219.41 | 125701 | 272991 | 287982 |
| Search k=1 | 3.78 | 264457 | 279708 | 292769 |
| Search k=10 | 3.30 | 302781 | 333851 | 355714 |
| Search k=100 | 3.50 | 285941 | 315873 | 350824 |
| Update Single | inf | 0 | 1 | 1 |
| Update Batch | 1897.53 | 52669 | 525997 | 525997 |
| Delete Single | inf | 0 | 0 | 1 |
| Delete Batch | inf | 46 | 56 | 56 |
| Concurrent Mixed | 3.82 | 261970 | 405325 | 413775 |

## Detailed Results

### Insert Single

**Configuration**: Sequential, no batching

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 220.00 ms (0.22 s)
- **Throughput**: 4545.45 ops/sec
- **Throughput**: 272727.27 ops/min

#### Latency Distribution

- **Average**: 219 μs (0.22 ms)
- **P50 (Median)**: 223 μs
- **P95**: 295 μs
- **P99**: 317 μs
- **Min**: 6 μs
- **Max**: 376 μs

#### Memory Impact

- **Before**: 0.00 MB
- **After**: 1.96 MB
- **Delta**: 1.96 MB

---

### Insert Batch

**Configuration**: Batch sizes: [100, 500, 1000], parallel

#### Performance Metrics

- **Total Operations**: 16000
- **Total Time**: 3792.00 ms (3.79 s)
- **Throughput**: 4219.41 ops/sec
- **Throughput**: 253164.56 ops/min

#### Latency Distribution

- **Average**: 125701 μs (125.70 ms)
- **P50 (Median)**: 110952 μs
- **P95**: 272991 μs
- **P99**: 287982 μs
- **Min**: 5428 μs
- **Max**: 287982 μs

#### Memory Impact

- **Before**: 0.00 MB
- **After**: 0.00 MB
- **Delta**: 0.00 MB

---

### Search k=1

**Configuration**: 1000 queries on 1000000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 264458.00 ms (264.46 s)
- **Throughput**: 3.78 ops/sec
- **Throughput**: 226.88 ops/min

#### Latency Distribution

- **Average**: 264457 μs (264.46 ms)
- **P50 (Median)**: 262955 μs
- **P95**: 279708 μs
- **P99**: 292769 μs
- **Min**: 246965 μs
- **Max**: 308516 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1962.56 MB
- **Delta**: 0.00 MB

---

### Search k=10

**Configuration**: 1000 queries on 1000000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 302782.00 ms (302.78 s)
- **Throughput**: 3.30 ops/sec
- **Throughput**: 198.16 ops/min

#### Latency Distribution

- **Average**: 302781 μs (302.78 ms)
- **P50 (Median)**: 301231 μs
- **P95**: 333851 μs
- **P99**: 355714 μs
- **Min**: 270596 μs
- **Max**: 374187 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1962.56 MB
- **Delta**: 0.00 MB

---

### Search k=100

**Configuration**: 1000 queries on 1000000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 285942.00 ms (285.94 s)
- **Throughput**: 3.50 ops/sec
- **Throughput**: 209.83 ops/min

#### Latency Distribution

- **Average**: 285941 μs (285.94 ms)
- **P50 (Median)**: 283121 μs
- **P95**: 315873 μs
- **P99**: 350824 μs
- **Min**: 260126 μs
- **Max**: 412789 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1962.56 MB
- **Delta**: 0.00 MB

---

### Update Single

**Configuration**: Sequential updates

#### Performance Metrics

- **Total Operations**: 500
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 0 μs (0.00 ms)
- **P50 (Median)**: 0 μs
- **P95**: 1 μs
- **P99**: 1 μs
- **Min**: 0 μs
- **Max**: 4 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1961.58 MB
- **Delta**: 17592186044415.02 MB

---

### Update Batch

**Configuration**: Batch size: 100, parallel

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 527.00 ms (0.53 s)
- **Throughput**: 1897.53 ops/sec
- **Throughput**: 113851.99 ops/min

#### Latency Distribution

- **Average**: 52669 μs (52.67 ms)
- **P50 (Median)**: 79 μs
- **P95**: 525997 μs
- **P99**: 525997 μs
- **Min**: 63 μs
- **Max**: 525997 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1962.56 MB
- **Delta**: 0.00 MB

---

### Delete Single

**Configuration**: Sequential deletes

#### Performance Metrics

- **Total Operations**: 500
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 0 μs (0.00 ms)
- **P50 (Median)**: 0 μs
- **P95**: 0 μs
- **P99**: 1 μs
- **Min**: 0 μs
- **Max**: 3 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1961.58 MB
- **Delta**: 17592186044415.02 MB

---

### Delete Batch

**Configuration**: Batch size: 100

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 46 μs (0.05 ms)
- **P50 (Median)**: 46 μs
- **P95**: 56 μs
- **P99**: 56 μs
- **Min**: 42 μs
- **Max**: 56 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1960.60 MB
- **Delta**: 17592186044414.04 MB

---

### Concurrent Mixed

**Configuration**: 70% search, 20% insert, 10% delete

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 261971.00 ms (261.97 s)
- **Throughput**: 3.82 ops/sec
- **Throughput**: 229.03 ops/min

#### Latency Distribution

- **Average**: 261970 μs (261.97 ms)
- **P50 (Median)**: 360430 μs
- **P95**: 405325 μs
- **P99**: 413775 μs
- **Min**: 0 μs
- **Max**: 420888 μs

#### Memory Impact

- **Before**: 1962.56 MB
- **After**: 1962.75 MB
- **Delta**: 0.19 MB

---

## Key Insights

### Insert Performance

- **Batch insert is 0.93x faster** than single insert
- Single insert: 4545.45 ops/sec (219 μs/op)
- Batch insert: 4219.41 ops/sec (125701 μs/batch)

### Search Performance

- **k=1**: 264457 μs avg, 3.78 QPS
- **k=10**: 302781 μs avg, 3.30 QPS
- **k=100**: 285941 μs avg, 3.50 QPS
- Search time scales with k: 1.08x slower (k=100 vs k=1)

### Update Performance

- **Batch update is 0.00x faster** than single update
- Single update: inf ops/sec
- Batch update: 1897.53 ops/sec

### Delete Performance

- **Batch delete is NaNx faster** than single delete
- Single delete: inf ops/sec
- Batch delete: inf ops/sec

### Concurrent Mixed Workload

- **Overall throughput**: 3.82 ops/sec
- **Average latency**: 261970 μs
- **P95 latency**: 405325 μs
- **P99 latency**: 413775 μs

## Recommendations

### For Maximum Throughput

1. **Use batch operations** whenever possible (2-10x faster)
2. **Optimize batch sizes**: 500-1000 vectors per batch
3. **Enable parallel processing** for batch operations

### For Low Latency

1. **Target P95**: Keep queries under 333851 μs for good UX
2. **Use smaller k values** when possible (k=10 is 2-3x faster than k=100)
3. **Warm up index** before serving production traffic

### For Memory Efficiency

1. **Expected memory**: ~0.00 MB per 10K vectors
2. **Use quantization** for collections > 100K vectors
3. **Consider lazy loading** for rarely accessed collections

## Performance Targets Met?

- ❌ Insert < 100μs/op (batch)
- ❌ Search < 5ms (k=10)
- ✅ Update < 200μs/op (batch)
- ✅ Delete < 50μs/op (batch)

---

*Report generated by Vectorizer Core Operations Benchmark*
