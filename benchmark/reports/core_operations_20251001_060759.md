# Vectorizer Core Operations Performance Benchmark

**Generated**: 2025-10-01 06:07:59 UTC

## Test Configuration

- **Dataset Size**: 10000 vectors
- **Vector Dimension**: 512
- **HNSW Parameters**: M=16, ef_construction=200
- **Distance Metric**: Cosine

## Executive Summary

| Operation | Throughput (ops/s) | Avg Latency (μs) | P95 Latency (μs) | P99 Latency (μs) |
|-----------|-------------------|------------------|------------------|------------------|
| Insert Single | 4329.00 | 231 | 302 | 354 |
| Insert Batch | 4266.67 | 124532 | 282793 | 283371 |
| Search k=1 | 1615.51 | 619 | 677 | 747 |
| Search k=10 | 1631.32 | 613 | 667 | 721 |
| Search k=100 | 1385.04 | 722 | 811 | 897 |
| Update Single | inf | 0 | 0 | 0 |
| Update Batch | 3184.71 | 31370 | 313372 | 313372 |
| Delete Single | inf | 0 | 0 | 0 |
| Delete Batch | inf | 21 | 24 | 24 |
| Concurrent Mixed | 1742.16 | 573 | 1369 | 1891 |

## Detailed Results

### Insert Single

**Configuration**: Sequential, no batching

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 231.00 ms (0.23 s)
- **Throughput**: 4329.00 ops/sec
- **Throughput**: 259740.26 ops/min

#### Latency Distribution

- **Average**: 231 μs (0.23 ms)
- **P50 (Median)**: 237 μs
- **P95**: 302 μs
- **P99**: 354 μs
- **Min**: 6 μs
- **Max**: 429 μs

#### Memory Impact

- **Before**: 0.00 MB
- **After**: 1.96 MB
- **Delta**: 1.96 MB

---

### Insert Batch

**Configuration**: Batch sizes: [100, 500, 1000], parallel

#### Performance Metrics

- **Total Operations**: 16000
- **Total Time**: 3750.00 ms (3.75 s)
- **Throughput**: 4266.67 ops/sec
- **Throughput**: 256000.00 ops/min

#### Latency Distribution

- **Average**: 124532 μs (124.53 ms)
- **P50 (Median)**: 113044 μs
- **P95**: 282793 μs
- **P99**: 283371 μs
- **Min**: 5688 μs
- **Max**: 283371 μs

#### Memory Impact

- **Before**: 0.00 MB
- **After**: 0.00 MB
- **Delta**: 0.00 MB

---

### Search k=1

**Configuration**: 1000 queries on 10000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 619.00 ms (0.62 s)
- **Throughput**: 1615.51 ops/sec
- **Throughput**: 96930.53 ops/min

#### Latency Distribution

- **Average**: 619 μs (0.62 ms)
- **P50 (Median)**: 613 μs
- **P95**: 677 μs
- **P99**: 747 μs
- **Min**: 565 μs
- **Max**: 791 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 19.61 MB
- **Delta**: 0.00 MB

---

### Search k=10

**Configuration**: 1000 queries on 10000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 613.00 ms (0.61 s)
- **Throughput**: 1631.32 ops/sec
- **Throughput**: 97879.28 ops/min

#### Latency Distribution

- **Average**: 613 μs (0.61 ms)
- **P50 (Median)**: 608 μs
- **P95**: 667 μs
- **P99**: 721 μs
- **Min**: 564 μs
- **Max**: 821 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 19.61 MB
- **Delta**: 0.00 MB

---

### Search k=100

**Configuration**: 1000 queries on 10000 vectors

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 722.00 ms (0.72 s)
- **Throughput**: 1385.04 ops/sec
- **Throughput**: 83102.49 ops/min

#### Latency Distribution

- **Average**: 722 μs (0.72 ms)
- **P50 (Median)**: 710 μs
- **P95**: 811 μs
- **P99**: 897 μs
- **Min**: 638 μs
- **Max**: 1540 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 19.61 MB
- **Delta**: 0.00 MB

---

### Update Single

**Configuration**: Sequential updates

#### Performance Metrics

- **Total Operations**: 500
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 0 μs (0.00 ms)
- **P50 (Median)**: 0 μs
- **P95**: 0 μs
- **P99**: 0 μs
- **Min**: 0 μs
- **Max**: 1 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 18.63 MB
- **Delta**: 17592186044415.02 MB

---

### Update Batch

**Configuration**: Batch size: 100, parallel

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 314.00 ms (0.31 s)
- **Throughput**: 3184.71 ops/sec
- **Throughput**: 191082.80 ops/min

#### Latency Distribution

- **Average**: 31370 μs (31.37 ms)
- **P50 (Median)**: 38 μs
- **P95**: 313372 μs
- **P99**: 313372 μs
- **Min**: 27 μs
- **Max**: 313372 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 19.61 MB
- **Delta**: 0.00 MB

---

### Delete Single

**Configuration**: Sequential deletes

#### Performance Metrics

- **Total Operations**: 500
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 0 μs (0.00 ms)
- **P50 (Median)**: 0 μs
- **P95**: 0 μs
- **P99**: 0 μs
- **Min**: 0 μs
- **Max**: 1 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 18.63 MB
- **Delta**: 17592186044415.02 MB

---

### Delete Batch

**Configuration**: Batch size: 100

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 0.00 ms (0.00 s)
- **Throughput**: inf ops/sec
- **Throughput**: inf ops/min

#### Latency Distribution

- **Average**: 21 μs (0.02 ms)
- **P50 (Median)**: 22 μs
- **P95**: 24 μs
- **P99**: 24 μs
- **Min**: 19 μs
- **Max**: 24 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 17.65 MB
- **Delta**: 17592186044414.04 MB

---

### Concurrent Mixed

**Configuration**: 70% search, 20% insert, 10% delete

#### Performance Metrics

- **Total Operations**: 1000
- **Total Time**: 574.00 ms (0.57 s)
- **Throughput**: 1742.16 ops/sec
- **Throughput**: 104529.62 ops/min

#### Latency Distribution

- **Average**: 573 μs (0.57 ms)
- **P50 (Median)**: 646 μs
- **P95**: 1369 μs
- **P99**: 1891 μs
- **Min**: 0 μs
- **Max**: 2531 μs

#### Memory Impact

- **Before**: 19.61 MB
- **After**: 19.80 MB
- **Delta**: 0.19 MB

---

## Key Insights

### Insert Performance

- **Batch insert is 0.99x faster** than single insert
- Single insert: 4329.00 ops/sec (231 μs/op)
- Batch insert: 4266.67 ops/sec (124532 μs/batch)

### Search Performance

- **k=1**: 619 μs avg, 1615.51 QPS
- **k=10**: 613 μs avg, 1631.32 QPS
- **k=100**: 722 μs avg, 1385.04 QPS
- Search time scales with k: 1.17x slower (k=100 vs k=1)

### Update Performance

- **Batch update is 0.00x faster** than single update
- Single update: inf ops/sec
- Batch update: 3184.71 ops/sec

### Delete Performance

- **Batch delete is NaNx faster** than single delete
- Single delete: inf ops/sec
- Batch delete: inf ops/sec

### Concurrent Mixed Workload

- **Overall throughput**: 1742.16 ops/sec
- **Average latency**: 573 μs
- **P95 latency**: 1369 μs
- **P99 latency**: 1891 μs

## Recommendations

### For Maximum Throughput

1. **Use batch operations** whenever possible (2-10x faster)
2. **Optimize batch sizes**: 500-1000 vectors per batch
3. **Enable parallel processing** for batch operations

### For Low Latency

1. **Target P95**: Keep queries under 667 μs for good UX
2. **Use smaller k values** when possible (k=10 is 2-3x faster than k=100)
3. **Warm up index** before serving production traffic

### For Memory Efficiency

1. **Expected memory**: ~0.00 MB per 10K vectors
2. **Use quantization** for collections > 100K vectors
3. **Consider lazy loading** for rarely accessed collections

## Performance Targets Met?

- ❌ Insert < 100μs/op (batch)
- ✅ Search < 5ms (k=10)
- ✅ Update < 200μs/op (batch)
- ✅ Delete < 50μs/op (batch)

---

*Report generated by Vectorizer Core Operations Benchmark*
